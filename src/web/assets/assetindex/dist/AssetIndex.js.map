{"version":3,"file":"AssetIndex.js","mappings":"AAAAA,MAAMC,WAAWC,UAAUC,KAAO,IAAIC,MAAMJ,MAAMC,WAAWC,UAAUC,KAAM,CAC3EE,MAAO,SAAUC,EAAQC,EAASC,GAChCC,QAAQJ,MAAMC,EAAQC,EAASC,GAE/BD,EAAQG,qBAAqBC,SAAS,OACxC,IAGFX,MAAMC,WAAWC,UAAUU,mBAAqB,IAAIR,MAClDJ,MAAMC,WAAWC,UAAUU,mBAC3B,CACEP,MAAO,SAAUC,EAAQC,EAASC,GAAU,IAAAK,EASCC,EAR3CL,QAAQJ,MAAMC,EAAQC,EAASC,GAEV,QAArBK,EAAAN,EAAQQ,qBAAa,IAAAF,GAArBA,EAAuBG,SAGrBT,EAAQU,QAAQC,KAAK,mBACrBlB,MAAMmB,aAAaC,eAEfpB,MAAMmB,aAAaE,mBACA,QAArBP,EAAAP,EAAQe,qBAAa,IAAAR,GAArBA,EAAuBE,UAGzBT,EAAQQ,cAAgBQ,EAAE,YAAa,CACrCC,KAAM,SACNC,MAAO,aACP,YAAa,OACbC,KAAM1B,MAAM2B,EAAE,iBAAkB,eAGlCpB,EAAQG,qBAAqBkB,QAAQrB,EAAQQ,eAE7CR,EAAQQ,cAAcc,GAAG,SAAS,WAChC,IAAItB,EAAQQ,cAAce,SAAS,WAAnC,CAIA,IAGMZ,EAAO,CACXa,SAHAxB,EAAQyB,WAAWzB,EAAQyB,WAAWC,OAAS,GAGvBF,UAG1BxB,EAAQQ,cAAcJ,SAAS,WAE/BX,MAAMkC,kBACJ,OACA,4CACA,CAAEhB,KAAAA,IAEDiB,MAAK,SAACC,GACLpC,MAAMqC,WAAWD,EAASlB,KAAKoB,UACjC,IAAE,OACK,SAAAC,GAAkB,IAAfH,EAAQG,EAARH,SACRpC,MAAMwC,GAAGC,aAAaL,EAASlB,KAAKwB,QACtC,IAAE,SACO,WACPnC,EAAQQ,cAAc4B,YAAY,UACpC,GAxBF,CAyBF,IAEJ","sources":["webpack:///./AssetIndex.js"],"sourcesContent":["Craft.AssetIndex.prototype.init = new Proxy(Craft.AssetIndex.prototype.init, {\n  apply: function (target, thisArg, argArray) {\n    Reflect.apply(target, thisArg, argArray);\n\n    thisArg.getButtonContainer().addClass(\"flex\");\n  },\n});\n\nCraft.AssetIndex.prototype.createUploadInputs = new Proxy(\n  Craft.AssetIndex.prototype.createUploadInputs,\n  {\n    apply: function (target, thisArg, argArray) {\n      Reflect.apply(target, thisArg, argArray);\n\n      thisArg.$createButton?.remove();\n\n      if (\n        thisArg.$source.data(\"volume-handle\") ===\n        Craft.HostedVideos.volumeHandle\n      ) {\n        if (Craft.HostedVideos.hideUploadButton) {\n          thisArg.$uploadButton?.remove();\n        }\n\n        thisArg.$createButton = $(\"<button/>\", {\n          type: \"button\",\n          class: \"btn submit\",\n          \"data-icon\": \"plus\",\n          text: Craft.t(\"_hosted-videos\", \"New video\"),\n        });\n\n        thisArg.getButtonContainer().prepend(thisArg.$createButton);\n\n        thisArg.$createButton.on(\"click\", () => {\n          if (thisArg.$createButton.hasClass(\"loading\")) {\n            return;\n          }\n\n          const currentFolder =\n            thisArg.sourcePath[thisArg.sourcePath.length - 1];\n\n          const data = {\n            folderId: currentFolder.folderId,\n          };\n\n          thisArg.$createButton.addClass(\"loading\");\n\n          Craft.sendActionRequest(\n            \"POST\",\n            \"_hosted-videos/assets/create-hosted-video\",\n            { data },\n          )\n            .then((response) => {\n              Craft.redirectTo(response.data.cpEditUrl);\n            })\n            .catch(({ response }) => {\n              Craft.cp.displayError(response.data.message);\n            })\n            .finally(() => {\n              thisArg.$createButton.removeClass(\"loading\");\n            });\n        });\n      }\n    },\n  },\n);\n"],"names":["Craft","AssetIndex","prototype","init","Proxy","apply","target","thisArg","argArray","Reflect","getButtonContainer","addClass","createUploadInputs","_thisArg$$createButto","_thisArg$$uploadButto","$createButton","remove","$source","data","HostedVideos","volumeHandle","hideUploadButton","$uploadButton","$","type","class","text","t","prepend","on","hasClass","folderId","sourcePath","length","sendActionRequest","then","response","redirectTo","cpEditUrl","_ref","cp","displayError","message","removeClass"],"sourceRoot":""}
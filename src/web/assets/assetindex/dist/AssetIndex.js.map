{"version":3,"file":"AssetIndex.js","mappings":"AAAAA,MAAMC,WAAWC,UAAUC,KAAO,IAAIC,MAAMJ,MAAMC,WAAWC,UAAUC,KAAM,CAC3EE,MAAO,SAAUC,EAAQC,EAASC,GAChCC,QAAQJ,MAAMC,EAAQC,EAASC,GAE/BD,EAAQG,qBAAqBC,SAAS,OACxC,IAGFX,MAAMC,WAAWC,UAAUU,mBAAqB,IAAIR,MAClDJ,MAAMC,WAAWC,UAAUU,mBAC3B,CACEP,MAAO,SAAUC,EAAQC,EAASC,GAAU,IAAAK,EAUCC,EAT3CL,QAAQJ,MAAMC,EAAQC,EAASC,GAEV,QAArBK,EAAAN,EAAQQ,qBAAa,IAAAF,GAArBA,EAAuBG,SAGrBhB,MAAMiB,aAAaC,cAAcC,SAC/BZ,EAAQa,QAAQC,KAAK,oBAGnBrB,MAAMiB,aAAaK,mBACA,QAArBR,EAAAP,EAAQgB,qBAAa,IAAAT,GAArBA,EAAuBE,UAGzBT,EAAQQ,cAAgBS,EAAE,YAAa,CACrCC,KAAM,SACNC,MAAO,aACP,YAAa,OACbC,KAAM3B,MAAM4B,EAAE,iBAAkB,eAGlCrB,EAAQG,qBAAqBmB,QAAQtB,EAAQQ,eAE7CR,EAAQQ,cAAce,GAAG,SAAS,WAChC,IAAIvB,EAAQQ,cAAcgB,SAAS,WAAnC,CAIA,IAGMV,EAAO,CACXW,SAHAzB,EAAQ0B,WAAW1B,EAAQ0B,WAAWC,OAAS,GAGvBF,UAGpBG,EAAU5B,EAAQQ,cAAcqB,QAAQ,UAAUF,OAAS,EAE7DC,EACF5B,EAAQ8B,eAER9B,EAAQQ,cAAcJ,SAAS,WAGjCX,MAAMsC,kBACJ,OACA,4CACA,CAAEjB,KAAAA,IAEDkB,MAAK,SAACC,GACDL,GACF5B,EAAQkC,oBACRlC,EAAQmC,iBACRnC,EAAQoC,yBAAyBH,EAASnB,KAAKuB,MAAMC,KAErD7C,MAAM8C,WAAWN,EAASnB,KAAK0B,UAEnC,IAAE,OACK,SAAAC,GAAkB,IAAfR,EAAQQ,EAARR,SACRxC,MAAMiD,GAAGC,aAAaV,EAASnB,KAAK8B,QACtC,IAAE,SACO,WACFhB,GACH5B,EAAQQ,cAAcqC,YAAY,UAEtC,GAtCF,CAuCF,IAEJ","sources":["webpack:///./AssetIndex.js"],"sourcesContent":["Craft.AssetIndex.prototype.init = new Proxy(Craft.AssetIndex.prototype.init, {\n  apply: function (target, thisArg, argArray) {\n    Reflect.apply(target, thisArg, argArray);\n\n    thisArg.getButtonContainer().addClass(\"flex\");\n  },\n});\n\nCraft.AssetIndex.prototype.createUploadInputs = new Proxy(\n  Craft.AssetIndex.prototype.createUploadInputs,\n  {\n    apply: function (target, thisArg, argArray) {\n      Reflect.apply(target, thisArg, argArray);\n\n      thisArg.$createButton?.remove();\n\n      if (\n        Craft.HostedVideos.volumeHandles.includes(\n          thisArg.$source.data(\"volume-handle\"),\n        )\n      ) {\n        if (Craft.HostedVideos.hideUploadButton) {\n          thisArg.$uploadButton?.remove();\n        }\n\n        thisArg.$createButton = $(\"<button/>\", {\n          type: \"button\",\n          class: \"btn submit\",\n          \"data-icon\": \"plus\",\n          text: Craft.t(\"_hosted-assets\", \"New video\"),\n        });\n\n        thisArg.getButtonContainer().prepend(thisArg.$createButton);\n\n        thisArg.$createButton.on(\"click\", () => {\n          if (thisArg.$createButton.hasClass(\"loading\")) {\n            return;\n          }\n\n          const currentFolder =\n            thisArg.sourcePath[thisArg.sourcePath.length - 1];\n\n          const data = {\n            folderId: currentFolder.folderId,\n          };\n\n          const inModal = thisArg.$createButton.closest(\".modal\").length > 0;\n\n          if (inModal) {\n            thisArg.setIndexBusy();\n          } else {\n            thisArg.$createButton.addClass(\"loading\");\n          }\n\n          Craft.sendActionRequest(\n            \"POST\",\n            \"_hosted-assets/assets/create-hosted-video\",\n            { data },\n          )\n            .then((response) => {\n              if (inModal) {\n                thisArg.setIndexAvailable();\n                thisArg.updateElements();\n                thisArg.selectElementAfterUpdate(response.data.asset.id);\n              } else {\n                Craft.redirectTo(response.data.cpEditUrl);\n              }\n            })\n            .catch(({ response }) => {\n              Craft.cp.displayError(response.data.message);\n            })\n            .finally(() => {\n              if (!inModal) {\n                thisArg.$createButton.removeClass(\"loading\");\n              }\n            });\n        });\n      }\n    },\n  },\n);\n"],"names":["Craft","AssetIndex","prototype","init","Proxy","apply","target","thisArg","argArray","Reflect","getButtonContainer","addClass","createUploadInputs","_thisArg$$createButto","_thisArg$$uploadButto","$createButton","remove","HostedVideos","volumeHandles","includes","$source","data","hideUploadButton","$uploadButton","$","type","class","text","t","prepend","on","hasClass","folderId","sourcePath","length","inModal","closest","setIndexBusy","sendActionRequest","then","response","setIndexAvailable","updateElements","selectElementAfterUpdate","asset","id","redirectTo","cpEditUrl","_ref","cp","displayError","message","removeClass"],"sourceRoot":""}